{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///E:/Referal%20IPTV%20-%20Admin%20Dashboard/src/models/User.ts"],"sourcesContent":["import mongoose, { Schema, Document } from 'mongoose';\r\n\r\nexport interface IUser extends Document {\r\n  fullName: string;\r\n  phoneNumber: string;\r\n  referralName?: string | null;\r\n  createdAt: Date;\r\n}\r\n\r\nconst UserSchema: Schema = new Schema<IUser>({\r\n  fullName: { type: String, required: true },\r\n  phoneNumber: { type: String, required: true },\r\n  referralName: { type: String, default: null },\r\n  createdAt: { type: Date, default: () => new Date() },\r\n});\r\n\r\nexport const UserModel = mongoose.models.User || mongoose.model<IUser>('User', UserSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AASA,MAAM,aAAqB,IAAI,mHAAM,CAAQ;IAC3C,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,cAAc;QAAE,MAAM;QAAQ,SAAS;IAAK;IAC5C,WAAW;QAAE,MAAM;QAAM,SAAS,IAAM,IAAI;IAAO;AACrD;AAEO,MAAM,YAAY,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAQ,QAAQ","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///E:/Referal%20IPTV%20-%20Admin%20Dashboard/src/app/api/admin/users/route.ts"],"sourcesContent":["import { UserModel } from '@/models/User';\r\nimport mongoose from 'mongoose';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\n// Connect to MongoDB\r\nconst MONGO_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/muu_iptv';\r\n\r\nasync function connectDB() {\r\n  try {\r\n    if (mongoose.connection.readyState === 1) {\r\n      return;\r\n    }\r\n    await mongoose.connect(MONGO_URI);\r\n  } catch (err) {\r\n    console.error('MongoDB connection error:', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nfunction verifyToken(token: string): boolean {\r\n  // Simple token verification (in production, use JWT verification)\r\n  return !!(token && token.length > 0);\r\n}\r\n\r\nexport async function GET(req: NextRequest) {\r\n  try {\r\n    const authHeader = req.headers.get('x-admin-token') || req.headers.get('Authorization');\r\n    if (!authHeader) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Unauthorized' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const token = authHeader.startsWith('Bearer ') ? authHeader.slice(7) : authHeader;\r\n    if (!verifyToken(token)) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Invalid token' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    await connectDB();\r\n    const users = await UserModel.find({});\r\n    \r\n    return NextResponse.json(\r\n      { success: true, data: users },\r\n      { status: 200 }\r\n    );\r\n  } catch (err) {\r\n    console.error('Get users error:', err);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Internal server error', error: String(err) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\nexport async function DELETE(req: NextRequest) {\r\n  try {\r\n    const authHeader = req.headers.get('x-admin-token') || req.headers.get('Authorization');\r\n    if (!authHeader) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Unauthorized' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    const token = authHeader.startsWith('Bearer ') ? authHeader.slice(7) : authHeader;\r\n    if (!verifyToken(token)) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'Invalid token' },\r\n        { status: 401 }\r\n      );\r\n    }\r\n\r\n    await connectDB();\r\n    \r\n    const url = new URL(req.url);\r\n    const pathParts = url.pathname.split('/');\r\n    const id = pathParts[pathParts.length - 1];\r\n    \r\n    if (!id || id === 'users') {\r\n      return NextResponse.json(\r\n        { success: false, message: 'User ID is required' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const result = await UserModel.findByIdAndDelete(id);\r\n    \r\n    if (!result) {\r\n      return NextResponse.json(\r\n        { success: false, message: 'User not found' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { success: true, message: 'User deleted successfully' },\r\n      { status: 200 }\r\n    );\r\n  } catch (err) {\r\n    console.error('Delete user error:', err);\r\n    return NextResponse.json(\r\n      { success: false, message: 'Internal server error', error: String(err) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}