(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},1006:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(5155),a=r(1169),l=r(4926),i=r(6651),o=r(2115),n=r(63);function d(e){let{onLogout:t,adminToken:r,isFullScreen:d=!1}=e,c=(0,n.useRouter)(),[h,u]=(0,o.useState)([]),[x,m]=(0,o.useState)([]),[g,f]=(0,o.useState)(""),[p,b]=(0,o.useState)(!0),[y,N]=(0,o.useState)("");(0,o.useEffect)(()=>{console.log("AdminDashboard mounted with token:",r),r&&w()},[r]),(0,o.useEffect)(()=>{if(!r)return;let e=setInterval(()=>{w()},5e3);return()=>clearInterval(e)},[r]),(0,o.useEffect)(()=>{if(""===g.trim())m(h);else{let e=g.toLowerCase();m(h.filter(t=>t.fullName.toLowerCase().includes(e)||t.phoneNumber.includes(e)))}},[g,h]);let w=async()=>{b(!0),N("");try{console.log("Fetching users with token:",r);let e="/api",t=e&&(e.includes("localhost")||e.includes("127.0.0.1"))?"/api":e||"/api",s=await fetch("".concat(t,"/admin/users"),{method:"GET",headers:{"Content-Type":"application/json","x-admin-token":r}}),a=await s.json();console.log("API Response:",a),a.success?(u(a.data),m(a.data)):N(a.message||"Failed to fetch users")}catch(e){console.error("Fetch users error:",e),N("Failed to fetch users. Please try again.")}finally{b(!1)}};return(0,s.jsx)("div",{className:d?"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 p-8":"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur",children:(0,s.jsxs)("div",{className:d?"w-full":"relative w-full max-w-6xl rounded-lg bg-gray-900 p-8 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-yellow-500/20 ring-1 ring-yellow-400/30",children:(0,s.jsx)(a.A,{className:"h-6 w-6 text-yellow-400"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"})]}),(0,s.jsxs)("button",{onClick:()=>{t(),d&&c.push("/")},className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 font-semibold text-white hover:bg-red-700",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"}),"Logout"]})]}),(0,s.jsxs)("div",{className:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-yellow-400",children:h.length}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Total Registrations"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:x.length}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Displayed Users"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-green-400",children:new Date().toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Today's Date"})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.A,{className:"absolute left-3 top-3 h-5 w-5 text-gray-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name or phone number...",value:g,onChange:e=>f(e.target.value),className:"w-full rounded-lg bg-gray-800 pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500"})]})}),y&&(0,s.jsx)("div",{className:"mb-6 rounded-lg bg-red-500/20 p-4 text-red-400",children:y}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"mb-4 text-lg font-semibold text-white",children:"User Registrations"}),p?(0,s.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-8 text-center",children:(0,s.jsx)("p",{className:"text-gray-400",children:"Loading users..."})}):x.length>0?(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-white/10",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"border-b border-white/10 bg-white/5",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-300",children:"Full Name"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-300",children:"Phone Number"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-300",children:"Referral Name"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-300",children:"Registered At"})]})}),(0,s.jsx)("tbody",{children:x.map(e=>(0,s.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-white font-medium",children:e.fullName}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.phoneNumber}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.referralName||"-"}),(0,s.jsx)("td",{className:"px-4 py-3 text-gray-400 text-xs",children:new Date(e.registrationDate).toLocaleString()})]},e._id))})]})}):(0,s.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-8 text-center",children:[(0,s.jsx)(a.A,{className:"mx-auto h-12 w-12 text-gray-500 mb-3"}),(0,s.jsx)("p",{className:"text-gray-400",children:g?"No users found matching your search.":"No registrations yet."})]})]})]})})}},1169:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:r,strokeWidth:n?24*Number(o)/Number(a):o,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:n,...d}=r;return(0,s.createElement)(o,{ref:i,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...d})});return r.displayName=a(e),r}},2563:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(2115),l=r(63),i=r(1006);function o(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(null),[o,n]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let t=sessionStorage.getItem("adminToken")||localStorage.getItem("adminToken");if(console.log("Admin page loaded, token:",t),!t){console.log("No token found, redirecting to home"),e.push("/");return}r(t),n(!1)},[e]),o)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950",children:(0,s.jsx)("div",{className:"text-white text-lg",children:"Loading..."})}):t?(0,s.jsx)(i.A,{adminToken:t,isFullScreen:!0,onLogout:()=>{sessionStorage.removeItem("adminToken"),localStorage.removeItem("adminToken"),e.push("/")}}):null}},4926:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9894:(e,t,r)=>{Promise.resolve().then(r.bind(r,2563))}},e=>{e.O(0,[441,255,358],()=>e(e.s=9894)),_N_E=e.O()}]);